{"version":3,"file":"5.14ba148254a8068d7fe6.hot-update.js","sources":["webpack:///./node_modules/isomorphic-unfetch/browser.js","webpack:///./node_modules/isomorphic-unfetch/node_modules/unfetch/dist/unfetch.es.js","webpack:///pages/index.js"],"sourcesContent":["module.exports = window.fetch || (window.fetch = require('unfetch').default || require('unfetch'));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/isomorphic-unfetch/browser.js\n// module id = ./node_modules/isomorphic-unfetch/browser.js\n// module chunks = 5","var index = typeof fetch=='function' ? fetch.bind() : function(url, options) {\n\toptions = options || {};\n\treturn new Promise( function (resolve, reject) {\n\t\tvar request = new XMLHttpRequest();\n\n\t\trequest.open(options.method || 'get', url, true);\n\n\t\tfor (var i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.withCredentials = options.credentials=='include';\n\n\t\trequest.onload = function () {\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.send(options.body || null);\n\n\t\tfunction response() {\n\t\t\tvar keys = [],\n\t\t\t\tall = [],\n\t\t\t\theaders = {},\n\t\t\t\theader;\n\n\t\t\trequest.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, function (m, key, value) {\n\t\t\t\tkeys.push(key = key.toLowerCase());\n\t\t\t\tall.push([key, value]);\n\t\t\t\theader = headers[key];\n\t\t\t\theaders[key] = header ? (header + \",\" + value) : value;\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tok: (request.status/100|0) == 2,\t\t// 200-299\n\t\t\t\tstatus: request.status,\n\t\t\t\tstatusText: request.statusText,\n\t\t\t\turl: request.responseURL,\n\t\t\t\tclone: response,\n\t\t\t\ttext: function () { return Promise.resolve(request.responseText); },\n\t\t\t\tjson: function () { return Promise.resolve(request.responseText).then(JSON.parse); },\n\t\t\t\tblob: function () { return Promise.resolve(new Blob([request.response])); },\n\t\t\t\theaders: {\n\t\t\t\t\tkeys: function () { return keys; },\n\t\t\t\t\tentries: function () { return all; },\n\t\t\t\t\tget: function (n) { return headers[n.toLowerCase()]; },\n\t\t\t\t\thas: function (n) { return n.toLowerCase() in headers; }\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n};\n\nexport default index;\n//# sourceMappingURL=unfetch.es.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/isomorphic-unfetch/node_modules/unfetch/dist/unfetch.es.js\n// module id = ./node_modules/isomorphic-unfetch/node_modules/unfetch/dist/unfetch.es.js\n// module chunks = 5","import { withRouter } from 'next/router'\r\nimport fetch from 'isomorphic-unfetch'\r\nimport imagesLoaded from 'imagesloaded'\r\n\r\nimport Layout from '../src/components/layout'\r\nimport Hero from '../src/components/hero'\r\nimport About from '../src/components/about'\r\nimport Services from '../src/components/services'\r\nimport Products from '../src/components/products'\r\nimport ProductModal from '../src/components/product-modal'\r\nimport Organic from '../src/components/organic'\r\nimport Certificate from '../src/components/certificate'\r\nimport LocationSection from '../src/components/location'\r\nimport Contact from '../src/components/contact'\r\n\r\nimport dataEs from '../src/data/data-es'\r\nimport dataEn from '../src/data/data-en'\r\n\r\nclass Index extends React.Component {\r\n   state = {\r\n      lang: 'es',\r\n      data: {\r\n         es: dataEs,\r\n         en: dataEn\r\n      },\r\n      productModal: false,\r\n      product: null,\r\n      certificateModal: false,\r\n      sections: [],\r\n      sectionToScroll: ''\r\n   }\r\n\r\n   static getInitialProps = async ctx => {\r\n      const { lang } = ctx.query\r\n      const res = await fetch(`../src/data/data-es.js`)\r\n      const data = await res.json()\r\n      return { lang, data }\r\n   }\r\n\r\n   componentDidMount() {\r\n      const { lang } = this.props.router.query\r\n      const sections = Array.from(document.querySelectorAll('section.scroll'))\r\n\r\n      this.waitForImages()\r\n      lang && this.setState({ sections, lang })\r\n\r\n      console.log('INIT PROPS: ', this.props)\r\n   }\r\n\r\n   componentDidUpdate() {\r\n      const { sections, sectionToScroll } = this.state\r\n\r\n      sections.map(\r\n         section =>\r\n            section.id == sectionToScroll &&\r\n            section.scrollIntoView({ block: 'start', behavior: 'smooth' })\r\n      )\r\n   }\r\n\r\n   handleScroll = section => this.setState({ sectionToScroll: section })\r\n\r\n   handleModal = (e, product = null) => {\r\n      const modalTarget = e.currentTarget.classList.contains('product')\r\n         ? 'productModal'\r\n         : 'certificateModal'\r\n      const openModal = !this.state[modalTarget]\r\n\r\n      e.preventDefault()\r\n      this.setState({ [modalTarget]: openModal, product })\r\n   }\r\n\r\n   waitForImages = () => {\r\n      const imgs = document.querySelectorAll('img')\r\n      for (let img of imgs) {\r\n         imagesLoaded(img, obj => (obj.images[0].img.style.opacity = 1))\r\n      }\r\n   }\r\n\r\n   render() {\r\n      const { lang, data } = this.state\r\n      const {\r\n         menu,\r\n         main: { home, about, services, products, organic, location }\r\n      } = data[lang]\r\n\r\n      return (\r\n         <Layout\r\n            menu={menu}\r\n            langs={Object.keys(data)}\r\n            sections={this.state.sections}\r\n            menuClick={this.handleScroll}\r\n         >\r\n            <ProductModal\r\n               open={this.state.productModal}\r\n               content={this.state.product}\r\n               closeModal={this.handleModal}\r\n            />\r\n            <Hero content={home} />\r\n            <About content={about} />\r\n            <Services content={services} />\r\n            <Products content={products} openModal={this.handleModal} />\r\n            <Organic content={organic} openModal={this.handleModal} />\r\n            <LocationSection content={location} />\r\n            <Contact lang={lang} />\r\n            <Certificate\r\n               open={this.state.certificateModal}\r\n               closeModal={this.handleModal}\r\n            />\r\n         </Layout>\r\n      )\r\n   }\r\n}\r\n\r\nexport default withRouter(Index)\r\n\n\n\n// WEBPACK FOOTER //\n// pages/index.js"],"mappings":";;;;;AAAA;;;;;;;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvDA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAVA;;;;;AAwCA;AAAA;AAAA;AAAA;AAAA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAGA;AAEA;AACA;AAAA;AACA;;;;;AAEA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;AArCA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAGA;AACA;AAEA;AAAA;AAAA;AAFA;AAIA;;;AAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AA5FA;AACA;AADA;;;;;;;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AAIA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAgFA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}