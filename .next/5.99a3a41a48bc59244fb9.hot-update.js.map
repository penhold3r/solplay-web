{"version":3,"file":"5.99a3a41a48bc59244fb9.hot-update.js","sources":["webpack:///src/data/submit-form.js"],"sourcesContent":["//--------------------------------------------------------\n//>>   SUBMIT FORMS\n//--------------------------------------------------------\n/**\n *\n * @param {HTMLFormElement} form - reference to form elemnt\n * @param {Object.<string, *>} settings - settings before send\n */\nconst submitForm = (form, settings) => {\n   if (!settings || !form) {\n      console.warn('Must configure form settings')\n      return false\n   } else if (!settings.dest)\n      console.warn('Must set \"dest\" property: exaple â€“ \"dest\":\"/contact\"')\n   else if (!settings.fields)\n      console.warn('Must set \"fields\" property value with input class name.')\n   else {\n      form.setAttribute('novalidate', '')\n      submitFormData(form, settings)\n   }\n}\n//\nconst submitFormData = (form, settings) => {\n   const fields = form.querySelectorAll(settings.fields)\n   const msg = document.createElement('div')\n   const validate = /^[a-zA-Z0-9_\\.\\-]+@[a-zA-Z0-9\\-]+\\.[a-zA-Z0-9\\-\\.]+$/\n   const formData = new FormData(form)\n   const opt = { method: 'POST' }\n   //\n   for (let field of fields) {\n      if (field.hasAttribute('required')) {\n         if (\n            field.value === '' ||\n            (field.getAttribute('name') === 'email' &&\n               !validate.test(field.value))\n         ) {\n            field.focus()\n            return false\n         }\n      }\n   }\n   //\n   msg.classList.add('output-msg')\n   msg.innerHTML = '<p></p>'\n   if (!document.body.contains(document.querySelector('.output-msg')))\n      form.append(msg)\n   //\n   if (settings.closeMsg == 'true') {\n      const msgClose = document.createElement('div')\n      msgClose.classList.add('close-form-msg')\n      msg.appendChild(msgClose)\n      msgClose.addEventListener('click', e => msg.classList.remove('visible'))\n   }\n   //\n   if (settings.name) formData.append('form-name', settings.name)\n   if (settings.reciever) formData.append('dest', settings.reciever)\n   //\n   opt.headers = {\n      'Content-Type': settings.urlencoded\n         ? 'application/x-www-form-urlencoded'\n         : 'application/json'\n   }\n   opt.body = settings.urlencoded ? urlencodeFormData(formData) : formData\n   //\n   console.log('data: ', opt)\n   //\n   fetch(settings.dest, opt)\n      .then(resp => {\n         if (resp.ok) {\n            msg.querySelector('p').innerHTML = !settings.successMsg\n               ? 'ok'\n               : settings.successMsg\n            msg.querySelector('p').className = 'msg-ok'\n            msg.classList.add('visible')\n            form.classList.add('success')\n            form.reset()\n            //\n            console.log('successful', opt)\n         } else {\n            msg.querySelector('p').innerHTML = !settings.errorMsg\n               ? 'error'\n               : settings.errorMsg\n            msg.querySelector('p').className = 'msg-error'\n            msg.classList.add('visible')\n            form.classList.add('error')\n            form.reset()\n            //\n            console.warn('failed')\n         }\n      })\n      .catch(err => console.error('Error: ', err))\n}\n//\n/**\n *\n * @param {FormData} fd - FromData Object to encode\n * @returns {String}\n */\nconst urlencodeFormData = fd => {\n   let str = ''\n   const encode = str => encodeURIComponent(str).replace(/%20/g, '+')\n   for (const pair of fd.entries()) {\n      if (typeof pair[1] == 'string') {\n         str += (str ? '&' : '') + encode(pair[0]) + '=' + encode(pair[1])\n      }\n   }\n   return str\n}\n//\nexport default submitForm\n\n\n\n// WEBPACK FOOTER //\n// src/data/submit-form.js"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AALA;AAAA;AAAA;AACA;AADA;AAOA;AAAA;AACA;AAAA;AACA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAmBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;;;;A","sourceRoot":""}